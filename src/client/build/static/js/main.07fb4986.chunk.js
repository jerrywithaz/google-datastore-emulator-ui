(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{213:function(e,t,n){},214:function(e,t,n){},275:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(48),c=n.n(r),o=(n(213),n(6)),l=n(352),s=n(169),u=n(171),j=n(22),d=(n(214),n(358)),b=n(355),f=n(357),h=n(356),O=n(90),g=n(288),p=n(173),v=n.n(p),x=n(61),m=n(161),y=n(2),S=new x.QueryClient({defaultOptions:{queries:{refetchOnMount:!1,refetchOnWindowFocus:!1}}}),w=function(e){var t=e.children;return Object(y.jsxs)(x.QueryClientProvider,{client:S,children:[t,Object(y.jsx)(m.ReactQueryDevtools,{})]})},C=n(168),_=n(107),k=n(89),E=n(125),R=n(53),z=n(353),M=n(67),P=n(70),I=n.n(P),L=n(99),F=n(100),T=n.n(F),D=T.a.create({});function U(){return A.apply(this,arguments)}function A(){return(A=Object(L.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/datastore/kinds");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e){return Object(x.useQuery)("kinds",U,e)},W=n(86),q=n(351);function B(){return(B=Object(L.a)(I.a.mark((function e(t,n,a,i,r){var c,o,l,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("/datastore/entities/".concat(t),{params:{page:n,pageSize:a,filters:i,sortModel:r}});case 2:return c=e.sent,o=c.data,l=o.info,s=o.entities,e.abrupt("return",{info:l,entities:s.map((function(e){var t,n;return Object(W.a)(Object(W.a)({},e),{},{id:null!==(t=null!==(n=e.id)&&void 0!==n?n:null===e||void 0===e?void 0:e.__key__)&&void 0!==t?t:"set by client: ".concat(Object(q.a)())})}))});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e,t,n,i){var r=Object(a.useState)(0),c=Object(o.a)(r,2),l=c[0],s=c[1],u=Object(a.useState)(10),j=Object(o.a)(u,2),d=j[0],b=j[1],f=Object(a.useState)(d),h=Object(o.a)(f,2),O=h[0],g=h[1],p=Object(x.useQuery)(["entitiesByKind",e,l.toString(),d.toString()],(function(){return function(e,t,n,a,i){return B.apply(this,arguments)}(e,l,d,t,n)}),Object(W.a)(Object(W.a)({},i),{},{enabled:!!e,onSuccess:function(e){var t=e.info.moreResults;"MORE_RESULTS_AFTER_LIMIT"!==t&&"MORE_RESULTS_AFTER_CURSOR"!==t||g((l+2)*d)}}));return{result:p,changePage:s,page:l,setPageSize:b,pageSize:d,rowCount:O}};var K=function(e){var t=[];e.forEach((function(e){Object.keys(e).forEach((function(e){t.includes(e)||t.push(e)}))})),t.sort();var n=t.findIndex((function(e){return"id"===e.toLowerCase()}));n>-1?(t.splice(n,1),t.unshift("id")):t.unshift("id");var a=t.findIndex((function(e){return"__key__"===e.toLowerCase()}));return a>-1&&t.splice(a,1),t},N=n(165),V=n(127),G=[{label:"equals",value:"="},{label:"greater than",value:">"},{label:"greater than or equal to",value:">="},{label:"less than",value:"<"},{label:"less than or equal to",value:"<"}],H={marginRight:12},X=function(e){var t=e.options,n=e.defaultValue,i=void 0===n?"":n,r=e.defaultOption,c=void 0===r?null:r,l=e.onChange,s=Object(a.useState)(c),u=Object(o.a)(s,2),j=u[0],d=u[1],f=Object(a.useState)("="),h=Object(o.a)(f,2),O=h[0],g=h[1],p=Object(a.useState)(i),v=Object(o.a)(p,2),x=v[0],m=v[1];return Object(a.useEffect)((function(){l(j,O,x)}),[j,x,O]),Object(y.jsxs)(b.a,{display:"flex",children:[Object(y.jsx)(_.a,{value:j,onChange:function(e){return d(e.target.value)},size:"small",style:H,children:t.map((function(e){var t=e.label,n=e.value;return Object(y.jsx)(R.a,{value:n,children:t},n)}))}),Object(y.jsx)(_.a,{value:O,onChange:function(e){return g(e.target.value)},size:"small",style:H,children:G.map((function(e){var t=e.label,n=e.value;return Object(y.jsx)(R.a,{value:n,children:t},n)}))}),Object(y.jsx)(V.a,{value:x,onChange:function(e){return m(e.target.value)},size:"small",style:H,variant:"outlined"}),Object(y.jsx)(M.a,{variant:"outlined",onClick:function(){m("")},children:"Clear"})]})};n(174);function Y(e){return"object"===typeof e&&null!==e}function Z(e){return"__key__"!==e}var $=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(!1),c=Object(o.a)(r,2),s=c[0],u=c[1],j=Object(a.useState)(null),d=Object(o.a)(j,2),f=d[0],O=d[1],g=Object(a.useState)([]),p=Object(o.a)(g,2),v=p[0],x=p[1],m=Object(a.useState)(null),S=Object(o.a)(m,2),w=S[0],P=S[1],I=Q({onSuccess:function(e){n||i(e[0])}}),L=I.data,F=void 0===L?[]:L,T=I.isLoading,D=J(n,v,w),U=D.result,A=U.data,W=U.isLoading,q=U.refetch,B=U.isRefetching,V=D.changePage,G=D.page,H=D.pageSize,$=D.setPageSize,ee=D.rowCount,te=Object(a.useMemo)((function(){return K((null===A||void 0===A?void 0:A.entities)||[])}),[A]),ne=Object(a.useMemo)((function(){return te.map((function(e){return{field:e,headerName:e,flex:1,valueFormatter:function(e){return Array.isArray(e.value)||"object"===typeof e.value?JSON.stringify(e.value):e.value},minWidth:200}}))}),[te]),ae=Object(a.useMemo)((function(){return te.map((function(e){return{label:e,value:e}}))}),[te]);return Object(a.useEffect)((function(){n&&w&&q()}),[w,n]),Object(y.jsxs)(b.a,{children:[Object(y.jsxs)(k.a,{children:[Object(y.jsx)(E.a,{id:"kinds-select-label",children:"Kinds"}),Object(y.jsx)(_.a,{autoWidth:!0,placeholder:"Kinds",value:n,onChange:function(e){return i(e.target.value)},label:"Kinds",labelId:"kinds-select-label",id:"kinds-select",size:"small",children:F.map((function(e){return Object(y.jsx)(R.a,{value:e,children:e},e)}))})]}),Object(y.jsx)(b.a,{marginTop:"12px",children:Object(y.jsx)(X,{options:ae,onChange:function(e,t,n){x([[e,t,n]])},defaultOption:ae[0].label})}),Object(y.jsx)(M.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){q()},children:"Apply Filters"}),Object(y.jsx)(b.a,{height:600,width:"100%",marginTop:"20px",children:Object(y.jsx)(N.a,{pagination:!0,paginationMode:"server",sortingMode:"server",rows:(null===A||void 0===A?void 0:A.entities)||[],rowCount:ee,columns:ne,pageSize:H,page:G,rowsPerPageOptions:[5,10,25,50,100],checkboxSelection:!1,disableSelectionOnClick:!0,loading:W||T||B,onPageChange:function(e){V(e),q()},getRowId:function(e){var t;return null!==(t=e.__key__)&&void 0!==t?t:e.id},rowHeight:40,onPageSizeChange:$,componentsProps:{pagination:{labelDisplayedRows:function(e){var t=e.from,n=e.to;return"".concat(t,"-").concat(n," of many")},nextIconButtonProps:{disabled:!1}}},onRowClick:function(e){u(!0),O(e.row)},onSortModelChange:P})}),Object(y.jsx)(z.a,{anchor:"right",open:s&&null!==f,title:"View Entity",onClose:function(){u(!1),O(null)},sx:{"& .MuiDrawer-paper":{boxSizing:"border-box",width:400}},children:Object(y.jsxs)(b.a,{padding:"20px",children:[Object(y.jsx)(h.a,{variant:"h6",children:"View Entity"}),f&&Object.keys(f).sort().filter(Z).map((function(e){return console.log(f[e]),Object(y.jsxs)(b.a,{padding:"5px 0px",children:[Object(y.jsx)(h.a,{fontWeight:"bold",children:e}),Object(y.jsx)(b.a,{maxHeight:300,overflow:"auto",maxWidth:"100%",children:Y(f[e])?Object(y.jsx)(l.a,{language:"json",style:C.a,children:JSON.stringify(f[e],null,2)}):Object(y.jsx)(h.a,{children:f[e]})})]},e)}))]})})]})};l.a.registerLanguage("json",s.a);var ee=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){T.a.get("/server_config.json").then((function(e){D.defaults.baseURL="http://localhost:".concat(e.data.port),i(!1)})).catch((function(){throw i(!1),new Error("Unable to fetch server config.")}))}),[]),Object(y.jsx)(u.a,{children:Object(y.jsx)(w,{children:Object(y.jsx)(b.a,{height:"100%",width:"100%",display:"flex",flexDirection:"column",children:n?Object(y.jsx)(b.a,{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",children:Object(y.jsx)(g.a,{})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(b.a,{children:Object(y.jsx)(d.a,{position:"static",children:Object(y.jsxs)(f.a,{children:[Object(y.jsx)(O.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(y.jsx)(v.a,{})}),Object(y.jsx)(h.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Google Datastore Emulator UI"})]})})}),Object(y.jsx)(b.a,{flex:1,padding:"20px",children:Object(y.jsx)(j.c,{children:Object(y.jsx)(j.a,{path:"/",component:$})})})]})})})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,362)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))};c.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(ee,{})}),document.getElementById("root")),te()}},[[275,1,2]]]);