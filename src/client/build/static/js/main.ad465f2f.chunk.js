(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{278:function(e,t,n){},279:function(e,t,n){},341:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(77),o=n.n(c),l=(n(278),n(7)),u=n(460),s=n(223),d=n(225),j=n(35),b=(n(279),n(472)),p=n(469),O=n(473),f=n(470),h=n(474),v=n(471),g=n(227),x=n.n(g),y=n(44),m=n.n(y),S=n(3),E=n(212),C=n(112),_=n(477),w=n(32),M=n(454),R=n(214),k=Object(M.a)(a||(a=Object(w.a)(["\n  query GetKinds {\n    getKinds\n  }\n"])));var T,F=function(e){return Object(R.a)(k,e)},N=n(438),I=Object(M.a)(T||(T=Object(w.a)(["\n  query GetEntities($input: GetEntitiesInput!) {\n    getEntities(input: $input) {\n      entities {\n        entity\n        key\n        path\n      }\n      info {\n        moreResults\n        endCursor\n      }\n      typesMap\n      columns\n    }\n  }\n"])));var U,A=function(e){var t,n=Object(r.useState)(0),a=Object(l.a)(n,2),i=a[0],c=a[1],o=Object(r.useState)(15),u=Object(l.a)(o,2),s=u[0],d=u[1],j=Object(r.useState)(s),b=Object(l.a)(j,2),p=b[0],O=b[1];return{result:Object(N.a)(I,{variables:{input:Object(C.a)(Object(C.a)({},e),{},{page:i,pageSize:s,filters:null===(t=e.filters)||void 0===t?void 0:t.filter((function(e){return e.value}))})},onCompleted:function(e){var t=e.getEntities.info.moreResults;"MORE_RESULTS_AFTER_LIMIT"!==t&&"MORE_RESULTS_AFTER_CURSOR"!==t||O((i+2)*s)}}),changePage:c,page:i,setPageSize:d,pageSize:s,rowCount:p}},D=n(220),L=n(439),z=Object(M.a)(U||(U=Object(w.a)(["\n  mutation UpdateEntity($input: UpdateEntityInput!) {\n    updateEntity(input: $input) {\n        entity\n        key\n        path\n    }\n  }\n"])));var P=function(e){return Object(L.a)(z,e)},q=n(219),B=n(465);n(230);function K(e){return"object"===typeof e&&null!==e}var G=n(2);function J(e){return"__key__"!==e&&"__path"!==e}var H,V,W,$=function(e){var t=e.drawerOpen,n=e.entity,a=e.setDrawerOpen,r=e.setEntity;return Object(G.jsx)(B.a,{anchor:"right",open:t&&null!==n,title:"View Entity",onClose:function(){a(!1),r(null)},sx:{"& .MuiDrawer-paper":{boxSizing:"border-box",width:400}},children:Object(G.jsxs)(p.a,{padding:"20px",children:[Object(G.jsx)(f.a,{variant:"h6",children:"View Entity"}),n&&Object.keys(n).sort().filter(J).map((function(e){return Object(G.jsxs)(p.a,{padding:"5px 0px",children:[Object(G.jsx)(f.a,{fontWeight:"bold",children:e}),Object(G.jsx)(p.a,{maxHeight:300,overflow:"auto",maxWidth:"100%",children:K(n[e])?Object(G.jsx)(u.a,{language:"json",style:q.a,children:JSON.stringify(n[e],null,2)}):Object(G.jsx)(f.a,{children:n[e]})})]},e)}))]})})},Y=n(453),Q=n(462),X=n(463),Z=n(458),ee=function(e){var t=e.kind,n=e.kinds,a=e.setKind;return Object(G.jsxs)(Q.a,{children:[Object(G.jsx)(X.a,{id:"kinds-select-label",children:"Kinds"}),Object(G.jsx)(Y.a,{autoWidth:!0,placeholder:"Kinds",value:t,onChange:function(e){return a(e.target.value)},label:"Kinds",labelId:"kinds-select-label",id:"kinds-select",size:"small",children:n.map((function(e){return Object(G.jsx)(Z.a,{value:e,children:e},e)}))})]})},te=n(21),ne=n(464),ae=n(478);!function(e){e.Array="array",e.Boolean="boolean",e.Buffer="buffer",e.Date="date",e.Nullish="nullish",e.Number="number",e.Object="object",e.String="string",e.Undefined="undefined"}(H||(H={})),function(e){e.MoreResultsAfterCursor="MORE_RESULTS_AFTER_CURSOR",e.MoreResultsAfterLimit="MORE_RESULTS_AFTER_LIMIT",e.MoreResultsTypeUnspecified="MORE_RESULTS_TYPE_UNSPECIFIED",e.NotFinished="NOT_FINISHED",e.NoMoreResults="NO_MORE_RESULTS"}(V||(V={})),function(e){e.Equals="equals",e.GreaterThan="greater_than",e.GreaterThanOrEqual="greater_than_or_equal",e.HasAncestor="has_ancestor",e.LessThan="less_than",e.LessThanOrEqual="less_than_or_equal"}(W||(W={}));var re,ie={string:"text",number:"number",date:"date",boolean:"checkbox"},ce=[{label:"equals",value:"="},{label:"greater than",value:">"},{label:"greater than or equal to",value:">="},{label:"less than",value:"<"},{label:"less than or equal to",value:">="}],oe={marginRight:12},le=function(e){var t,n,a=e.options,i=e.defaultValue,c=void 0===i?"":i,o=e.defaultOption,u=void 0===o?null:o,s=e.onChange,d=e.onRemove,j=e.typesMap,b=Object(r.useState)(u),O=Object(l.a)(b,2),f=O[0],h=O[1],v=Object(r.useState)(""),g=Object(l.a)(v,2),x=g[0],y=g[1],m=Object(r.useState)(c),E=Object(l.a)(m,2),C=E[0],w=E[1],M=null!==f?j[f]:"string",R=(t={},Object(S.a)(t,H.String,(function(e){return w(e)})),Object(S.a)(t,H.Number,(function(e){return w(Number(e))})),Object(S.a)(t,H.Boolean,(function(e){return w(Boolean(e))})),Object(S.a)(t,H.Array,(function(e){return w(e)})),Object(S.a)(t,H.Object,(function(e){return w(e)})),Object(S.a)(t,H.Undefined,(function(){return w(null)})),Object(S.a)(t,H.Nullish,(function(){return w(null)})),Object(S.a)(t,H.Date,(function(e){return w(e)})),Object(S.a)(t,H.Buffer,(function(e){return w(e)})),t);return Object(r.useEffect)((function(){s(f,x,C,M)}),[f,C,x]),Object(G.jsxs)(p.a,{display:"flex",children:[Object(G.jsx)(Y.a,{value:f,onChange:function(e){h(e.target.value)},size:"small",style:oe,children:a.map((function(e){var t=e.label,n=e.value,a=e.type;return Object(G.jsx)(Z.a,{value:n,"data-type":a,children:t},n)}))}),Object(G.jsx)(Y.a,{value:x,onChange:function(e){return y(e.target.value)},size:"small",style:oe,children:ce.map((function(e){var t=e.label,n=e.value;return Object(G.jsx)(Z.a,{value:n,children:t},t)}))}),Object(G.jsx)(ne.a,{value:C,onChange:function(e){(R[M]||w)(e.target.value)},size:"small",style:oe,variant:"outlined",type:null!==(n=ie[M])&&void 0!==n?n:"text"}),Object(G.jsxs)(ae.a,{children:[Object(G.jsx)(_.a,{variant:"outlined",onClick:function(){w("")},children:"Clear"}),Object(G.jsx)(_.a,{variant:"outlined",onClick:d,children:"Remove"})]})]})},ue=(re={},Object(S.a)(re,H.Date,(function(e){return new Date(e)})),Object(S.a)(re,H.Boolean,(function(e){return Boolean(e)})),Object(S.a)(re,H.String,(function(e){return e})),Object(S.a)(re,H.Number,(function(e){return e})),Object(S.a)(re,H.Array,(function(e){return e})),Object(S.a)(re,H.Object,(function(e){return e})),Object(S.a)(re,H.Undefined,(function(){return null})),Object(S.a)(re,H.Nullish,(function(){return null})),Object(S.a)(re,H.Buffer,(function(e){return e})),re),se=function(e){var t=e.onApplyFilters,n=e.filterOptions,a=e.typesMap,i=Object(r.useState)([]),c=Object(l.a)(i,2),o=c[0],u=c[1];return 0===n.length?null:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(p.a,{marginTop:"12px",children:o.map((function(e,t){return Object(G.jsx)(le,{options:n,typesMap:a,onChange:function(e,n,a,r){u((function(i){var c=Object(te.a)(i);return c.splice(t,1,{property:e,operator:n,value:a,type:r}),c}))},onRemove:function(){u((function(e){var n=Object(te.a)(e);return n.splice(t,1),n}))},defaultOption:n[0].label},"filter-".concat(t))}))}),Object(G.jsxs)(ae.a,{children:[Object(G.jsx)(_.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){u((function(e){return[].concat(Object(te.a)(e),[{property:n[0].label,operator:"=",value:"",type:"string"}])}))},children:"Add Filter"}),Object(G.jsx)(_.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){t(o.map((function(e){var t=e.property,n=e.value,a=e.operator,r=e.type;return{property:t,value:(0,ue[r])(n),operator:a}})))},children:"Apply Filters"}),Object(G.jsx)(_.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){t([]),u([])},children:"Reset Filters"})]})]})};var de=function(){var e,t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(!1),o=Object(l.a)(c,2),u=o[0],s=o[1],d=Object(r.useState)(null),j=Object(l.a)(d,2),b=j[0],O=j[1],f=Object(r.useState)([]),h=Object(l.a)(f,2),v=h[0],g=h[1],x=Object(r.useState)(null),y=Object(l.a)(x,2),w=y[0],M=y[1],R=Object(r.useState)(null),k=Object(l.a)(R,2),T=k[0],N=k[1],I=F({onCompleted:function(e){a||i(e.getKinds[0])}}),U=I.data,L=I.loading,z=(U||{getKinds:[]}).getKinds,q=A({kind:a,filters:v,sortModel:w}),B=Object(l.a)(q.result,2),K=B[0],J=B[1],H=J.data,V=J.loading,W=q.changePage,Y=q.page,Q=q.pageSize,X=q.setPageSize,Z=q.rowCount,te=P({onCompleted:function(){return K()}}),ne=Object(l.a)(te,1)[0],ae=(null!==H&&void 0!==H?H:{}).getEntities,re=Object(r.useMemo)((function(){return(null===ae||void 0===ae?void 0:ae.entities)?null===ae||void 0===ae?void 0:ae.entities.map((function(e){var t=e.entity,n=e.key,a=e.path;return Object(C.a)(Object(C.a)({id:n,key:n},t),{},{__path:a})})):[]}),[null===ae||void 0===ae?void 0:ae.entities]),ie=Object(r.useMemo)((function(){var e=((null===ae||void 0===ae?void 0:ae.columns)||[]).map((function(e){var t=null===ae||void 0===ae?void 0:ae.typesMap[e];return{field:e,headerName:e,flex:1,valueFormatter:function(e){return e.value instanceof Date?e.value.toLocaleString():void 0===e.value?"-":e.value},valueGetter:function(e){var t=e.row[e.field];return"date"===(null===ae||void 0===ae?void 0:ae.typesMap[e.field])?t?new Date(t):void 0:function(e){return null!==e&&void 0!==e&&!(!Array.isArray(e)&&"object"!==typeof e)}(t)?JSON.stringify(t):t},editable:!0,minWidth:200,type:"array"===t||"object"===t?"string":null===ae||void 0===ae?void 0:ae.typesMap[e]}}),[]);return[{field:"view",editable:!1,headerName:"",renderCell:function(e){return Object(G.jsx)(_.a,{onClick:function(){s(!0),O(e.row)},variant:"contained",size:"small",children:"View"})},width:100}].concat(e)}),[ae]),ce=Object(r.useMemo)((function(){return ae?ae.columns.map((function(e){return{label:e,value:e,type:ae.typesMap[e]}})):[]}),[ae]),oe=Object(r.useCallback)(function(){var e=Object(E.a)(m.a.mark((function e(t){var n,a,r,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=14;break}return n=t.value,a=t.field,r=null===ae||void 0===ae?void 0:ae.typesMap[a],i="array"===r||"object"===r,e.prev=4,c=Object(S.a)({},a,i?JSON.parse(n):(Date,n)),o=T.row.__path,e.next=9,ne({variables:{input:{path:o,updates:c}}});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),[T,null===ae||void 0===ae?void 0:ae.typesMap,ne]);return Object(r.useEffect)((function(){a&&K()}),[w,a]),Object(G.jsxs)(p.a,{children:[Object(G.jsx)(ee,{kind:a,kinds:z,setKind:i}),Object(G.jsx)(se,{onApplyFilters:g,filterOptions:ce,typesMap:null!==(e=null===ae||void 0===ae?void 0:ae.typesMap)&&void 0!==e?e:{}}),Object(G.jsx)(p.a,{height:600,width:"100%",marginTop:"20px",children:Object(G.jsx)(D.a,{pagination:!0,paginationMode:"server",sortingMode:"server",rows:re,rowCount:Z,columns:ie,pageSize:Q,page:Y,editMode:"cell",onCellEditStart:function(e){N(e)},onCellEditCommit:oe,rowsPerPageOptions:[5,10,15,25,50,100],checkboxSelection:!1,loading:V||L,onPageChange:function(e){W(e),K()},getRowId:function(e){return e.id},disableSelectionOnClick:!0,rowHeight:40,onPageSizeChange:X,componentsProps:{pagination:{labelDisplayedRows:function(e){var t=e.from,n=e.to;return"".concat(t,"-").concat(n," of many")},nextIconButtonProps:{disabled:!1}}},onSortModelChange:function(e){return M(e)}})}),Object(G.jsx)($,{setDrawerOpen:s,setEntity:O,entity:b,drawerOpen:u})]})},je=n(222),be=n.n(je),pe=n(240),Oe=n(455),fe=n(452);u.a.registerLanguage("json",s.a);var he=function(){var e=Object(r.useState)(void 0),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){be.a.get("/server_config.json").then((function(e){a(new pe.a({uri:"http://localhost:".concat(e.data.port,"/graphql"),cache:new Oe.a}))})).catch((function(){throw new Error("Unable to fetch server config.")}))}),[]),Object(G.jsx)(d.a,{children:Object(G.jsx)(p.a,{height:"100%",width:"100%",display:"flex",flexDirection:"column",children:void 0===n?Object(G.jsx)(p.a,{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",children:Object(G.jsx)(v.a,{})}):Object(G.jsxs)(fe.a,{client:n,children:[Object(G.jsx)(p.a,{children:Object(G.jsx)(b.a,{position:"static",children:Object(G.jsxs)(O.a,{children:[Object(G.jsx)(h.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(G.jsx)(x.a,{})}),Object(G.jsx)(f.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Google Datastore Emulator UI"})]})})}),Object(G.jsx)(p.a,{flex:1,padding:"20px",children:Object(G.jsx)(j.c,{children:Object(G.jsx)(j.a,{path:"/",component:de})})})]})})})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,483)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};o.a.render(Object(G.jsx)(i.a.StrictMode,{children:Object(G.jsx)(he,{})}),document.getElementById("root")),ve()}},[[341,1,2]]]);