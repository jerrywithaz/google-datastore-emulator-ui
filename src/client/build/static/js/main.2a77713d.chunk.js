(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{208:function(e,t,n){},209:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(52),c=n.n(i),o=(n(208),n(6)),s=n(167),l=n(23),u=(n(209),n(325)),j=n(322),d=n(324),b=n(323),f=n(92),h=n(256),O=n(169),p=n.n(O),g=n(64),v=n(162),x=n(2),y=new g.QueryClient({defaultOptions:{queries:{refetchOnMount:!1,refetchOnWindowFocus:!1}}}),m=function(e){var t=e.children;return Object(x.jsxs)(g.QueryClientProvider,{client:y,children:[t,Object(x.jsx)(v.ReactQueryDevtools,{})]})},w=n(111),S=n(91),C=n(128),_=n(56),k=n(320),E=n(70),R=n(73),P=n.n(R),z=n(100),I=n(101),M=n.n(I),F=M.a.create({});function L(){return T.apply(this,arguments)}function T(){return(T=Object(z.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.get("/datastore/kinds");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){return Object(g.useQuery)("kinds",L,e)},A=n(88),U=n(319);function N(){return(N=Object(z.a)(P.a.mark((function e(t,n,a,r){var i,c,o,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),e.next=3,F.get("/datastore/entities/".concat(t),{params:{page:n,pageSize:a,filters:r}});case 3:return i=e.sent,c=i.data,o=c.info,s=c.entities,e.abrupt("return",{info:o,entities:s.map((function(e){var t,n;return Object(A.a)(Object(A.a)({},e),{},{id:null!==(t=null!==(n=e.id)&&void 0!==n?n:null===e||void 0===e?void 0:e.__key__)&&void 0!==t?t:"set by client: ".concat(Object(U.a)())})}))});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e,t,n){var r=Object(a.useState)(0),i=Object(o.a)(r,2),c=i[0],s=i[1],l=Object(a.useState)(10),u=Object(o.a)(l,2),j=u[0],d=u[1],b=Object(a.useState)(j),f=Object(o.a)(b,2),h=f[0],O=f[1];return{result:Object(g.useQuery)(["entitiesByKind",e,c.toString(),j.toString()],(function(){return function(e,t,n,a){return N.apply(this,arguments)}(e,c,j,t)}),Object(A.a)(Object(A.a)({},n),{},{enabled:!!e,onSuccess:function(e){var t=e.info.moreResults;"MORE_RESULTS_AFTER_LIMIT"!==t&&"MORE_RESULTS_AFTER_CURSOR"!==t||O((c+2)*j)}})),changePage:s,page:c,setPageSize:d,pageSize:j,rowCount:h}};var W=function(e){var t=[];e.forEach((function(e){Object.keys(e).forEach((function(e){t.includes(e)||t.push(e)}))})),t.sort();var n=t.findIndex((function(e){return"id"===e.toLowerCase()}));n>-1?(t.splice(n,1),t.unshift("id")):t.unshift("id");var a=t.findIndex((function(e){return"__key__"===e.toLowerCase()}));return a>-1&&t.splice(a,1),t},q=n(166),B=n(170),J=n(106);function K(e){try{if(function(e){return Object(J.a)(Date.parse(e))}(e))return Object(B.a)(new Date(e),"PPpp");throw new Error("Not a string")}catch(t){throw t}}var V=function(e){try{return function(e){try{if("string"===typeof e){var t=JSON.parse(e);if("object"===typeof t||Array.isArray(t))return e}throw new Error("Not a string")}catch(n){throw n}}(e)}catch(t){try{return K(e)}catch(n){return String(e)}}},G=n(130),H=[{label:"equals",value:"="},{label:"greater than",value:">"},{label:"greater than or equal to",value:">="},{label:"less than",value:"<"},{label:"less than or equal to",value:"<"}],X={marginRight:12},Y=function(e){var t=e.options,n=e.defaultValue,r=void 0===n?"":n,i=e.defaultOption,c=void 0===i?null:i,s=e.onChange,l=Object(a.useState)(c),u=Object(o.a)(l,2),d=u[0],b=u[1],f=Object(a.useState)("="),h=Object(o.a)(f,2),O=h[0],p=h[1],g=Object(a.useState)(r),v=Object(o.a)(g,2),y=v[0],m=v[1];return Object(a.useEffect)((function(){s(d,O,y)}),[d,y,O]),Object(x.jsxs)(j.a,{display:"flex",children:[Object(x.jsx)(w.a,{value:d,onChange:function(e){return b(e.target.value)},size:"small",style:X,children:t.map((function(e){var t=e.label,n=e.value;return Object(x.jsx)(_.a,{value:n,children:t},n)}))}),Object(x.jsx)(w.a,{value:O,onChange:function(e){return p(e.target.value)},size:"small",style:X,children:H.map((function(e){var t=e.label,n=e.value;return Object(x.jsx)(_.a,{value:n,children:t},n)}))}),Object(x.jsx)(G.a,{value:y,onChange:function(e){return m(e.target.value)},size:"small",style:X,variant:"outlined"}),Object(x.jsx)(E.a,{variant:"outlined",onClick:function(){m("")},children:"Clear"})]})};function Z(e){return"__key__"!==e}var $=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(o.a)(i,2),s=c[0],l=c[1],u=Object(a.useState)(null),d=Object(o.a)(u,2),f=d[0],h=d[1],O=Object(a.useState)([]),p=Object(o.a)(O,2),g=p[0],v=p[1],y=D({onSuccess:function(e){n||r(e[0])}}),m=y.data,R=void 0===m?[]:m,P=y.isLoading,z=Q(n,g),I=z.result,M=I.data,F=I.isLoading,L=I.refetch,T=I.isRefetching,A=z.changePage,U=z.page,N=z.pageSize,B=z.setPageSize,J=z.rowCount,K=Object(a.useMemo)((function(){return W((null===M||void 0===M?void 0:M.entities)||[])}),[M]),G=Object(a.useMemo)((function(){return K.map((function(e){return{field:e,headerName:e,flex:1,valueFormatter:function(e){return Array.isArray(e.value)||"object"===typeof e.value?JSON.stringify(e.value):e.value},minWidth:200}}))}),[K]),H=Object(a.useMemo)((function(){return K.map((function(e){return{label:e,value:e}}))}),[K]);return Object(x.jsxs)(j.a,{children:[Object(x.jsxs)(S.a,{children:[Object(x.jsx)(C.a,{id:"kinds-select-label",children:"Kinds"}),Object(x.jsx)(w.a,{autoWidth:!0,placeholder:"Kinds",value:n,onChange:function(e){return r(e.target.value)},label:"Kinds",labelId:"kinds-select-label",id:"kinds-select",size:"small",children:R.map((function(e){return Object(x.jsx)(_.a,{value:e,children:e},e)}))})]}),Object(x.jsx)(j.a,{marginTop:"12px",children:Object(x.jsx)(Y,{options:H,onChange:function(e,t,n){v([[e,t,n]])},defaultOption:H[0].label})}),Object(x.jsx)(E.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){L()},children:"Apply Filters"}),Object(x.jsx)(j.a,{height:600,width:"100%",marginTop:"20px",children:Object(x.jsx)(q.a,{pagination:!0,paginationMode:"server",rows:(null===M||void 0===M?void 0:M.entities)||[],rowCount:J,columns:G,pageSize:N,page:U,rowsPerPageOptions:[5,10,25,50,100],checkboxSelection:!1,disableSelectionOnClick:!0,loading:F||P||T,onPageChange:function(e){A(e),L()},getRowId:function(e){var t;return null!==(t=e.__key__)&&void 0!==t?t:e.id},rowHeight:40,onPageSizeChange:B,componentsProps:{pagination:{labelDisplayedRows:function(e){var t=e.from,n=e.to;return"".concat(t,"-").concat(n," of many")},nextIconButtonProps:{disabled:!1}}},filterModel:{items:[]},onRowClick:function(e){l(!0),h(e.row)}})}),Object(x.jsx)(k.a,{anchor:"right",open:s&&null!==f,title:"View Entity",onClose:function(){l(!1),h(null)},sx:{"& .MuiDrawer-paper":{boxSizing:"border-box",width:300}},children:Object(x.jsxs)(j.a,{padding:"20px",children:[Object(x.jsx)(b.a,{variant:"h6",children:"View Entity"}),f&&Object.keys(f).sort().filter(Z).map((function(e){return Object(x.jsxs)(j.a,{padding:"5px 0px",children:[Object(x.jsx)(b.a,{fontWeight:"bold",children:e}),Object(x.jsx)(j.a,{maxHeight:300,overflow:"auto",maxWidth:"100%",children:Object(x.jsx)(b.a,{children:V(f[e])})})]},e)}))]})})]})},ee=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){M.a.get("/server_config.json").then((function(e){F.defaults.baseURL="http://localhost:".concat(e.data.port),r(!1)})).catch((function(){throw r(!1),new Error("Unable to fetch server config.")}))}),[]),Object(x.jsx)(s.a,{children:Object(x.jsx)(m,{children:Object(x.jsx)(j.a,{height:"100%",width:"100%",display:"flex",flexDirection:"column",children:n?Object(x.jsx)(j.a,{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",children:Object(x.jsx)(h.a,{})}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(j.a,{children:Object(x.jsx)(u.a,{position:"static",children:Object(x.jsxs)(d.a,{children:[Object(x.jsx)(f.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(x.jsx)(p.a,{})}),Object(x.jsx)(b.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Google Datastore Emulator UI"})]})})}),Object(x.jsx)(j.a,{flex:1,padding:"20px",children:Object(x.jsx)(l.c,{children:Object(x.jsx)(l.a,{path:"/",component:$})})})]})})})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,329)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(ee,{})}),document.getElementById("root")),te()}},[[243,1,2]]]);