(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{203:function(e,t,n){},204:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(50),c=n.n(a),o=(n(203),n(6)),s=n(162),u=n(23),l=(n(204),n(322)),d=n(319),j=n(321),h=n(320),f=n(91),b=n(251),p=n(164),O=n.n(p),g=n(62),x=n(157),v=n(2),w=new g.QueryClient({defaultOptions:{queries:{refetchOnMount:!1,refetchOnWindowFocus:!1}}}),y=function(e){var t=e.children;return Object(v.jsxs)(g.QueryClientProvider,{client:w,children:[t,Object(v.jsx)(x.ReactQueryDevtools,{})]})},m=n(107),S=n(90),_=n(124),k=n(54),C=n(317),E=n(71),P=n.n(E),R=n(98),I=n(99),L=n.n(I),M=L.a.create({});function z(){return F.apply(this,arguments)}function F(){return(F=Object(R.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/datastore/kinds");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){return Object(g.useQuery)("kinds",z,e)},T=n(87),A=n(316);function U(){return(U=Object(R.a)(P.a.mark((function e(t,n,r){var i,a,c,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("/datastore/entities/".concat(t),{params:{page:n,pageSize:r}});case 2:return i=e.sent,a=i.data,c=a.info,o=a.entities,e.abrupt("return",{info:c,entities:o.map((function(e){var t,n;return Object(T.a)(Object(T.a)({},e),{},{id:null!==(t=null!==(n=e.id)&&void 0!==n?n:null===e||void 0===e?void 0:e.__key__)&&void 0!==t?t:"set by client: ".concat(Object(A.a)())})}))});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e,t){var n=Object(r.useState)(0),i=Object(o.a)(n,2),a=i[0],c=i[1],s=Object(r.useState)(10),u=Object(o.a)(s,2),l=u[0],d=u[1],j=Object(r.useState)(l),h=Object(o.a)(j,2),f=h[0],b=h[1],p=Object(g.useQuery)(["entitiesByKind",e,a.toString(),l.toString()],(function(){return function(e,t,n){return U.apply(this,arguments)}(e,a,l)}),Object(T.a)(Object(T.a)({},t),{},{enabled:!!e,onSuccess:function(e){var t=e.info.moreResults;"MORE_RESULTS_AFTER_LIMIT"!==t&&"MORE_RESULTS_AFTER_CURSOR"!==t||b((a+2)*l)}}));return{result:p,changePage:c,page:a,setPageSize:d,pageSize:l,rowCount:f}};var Q=function(e){var t=[];e.forEach((function(e){Object.keys(e).forEach((function(e){t.includes(e)||t.push(e)}))})),t.sort();var n=t.findIndex((function(e){return"id"===e.toLowerCase()}));n>-1?(t.splice(n,1),t.unshift("id")):t.unshift("id");var r=t.findIndex((function(e){return"__key__"===e.toLowerCase()}));return r>-1&&t.splice(r,1),t},W=n(161),B=n(165),J=n(103);function K(e){try{if(function(e){return Object(J.a)(Date.parse(e))}(e))return Object(B.a)(new Date(e),"PPpp");throw new Error("Not a string")}catch(t){throw t}}var G=function(e){try{return function(e){try{if("string"===typeof e){var t=JSON.parse(e);if("object"===typeof t||Array.isArray(t))return e}throw new Error("Not a string")}catch(n){throw n}}(e)}catch(t){try{return K(e)}catch(n){return String(e)}}};function H(e){return"__key__"!==e}var V=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(!1),c=Object(o.a)(a,2),s=c[0],u=c[1],l=Object(r.useState)(null),j=Object(o.a)(l,2),f=j[0],b=j[1],p=D({onSuccess:function(e){n||i(e[0])}}),O=p.data,g=void 0===O?[]:O,x=p.isLoading,w=N(n),y=w.result,E=y.data,P=y.isLoading,R=y.refetch,I=y.isRefetching,L=w.changePage,M=w.page,z=w.pageSize,F=w.setPageSize,T=w.rowCount,A=Object(r.useMemo)((function(){return Q((null===E||void 0===E?void 0:E.entities)||[])}),[E]),U=Object(r.useMemo)((function(){return A.map((function(e){return{field:e,headerName:e,flex:1,valueFormatter:function(e){return Array.isArray(e.value)||"object"===typeof e.value?JSON.stringify(e.value):e.value},minWidth:200}}))}),[A]);return Object(v.jsxs)(d.a,{children:[Object(v.jsxs)(S.a,{children:[Object(v.jsx)(_.a,{id:"kinds-select-label",children:"Kinds"}),Object(v.jsx)(m.a,{autoWidth:!0,placeholder:"Kinds",value:n,onChange:function(e){return i(e.target.value)},label:"Kinds",labelId:"kinds-select-label",id:"kinds-select",children:g.map((function(e){return Object(v.jsx)(k.a,{value:e,children:e},e)}))})]}),Object(v.jsx)(d.a,{height:600,width:"100%",marginTop:"20px",children:Object(v.jsx)(W.a,{pagination:!0,paginationMode:"server",rows:(null===E||void 0===E?void 0:E.entities)||[],rowCount:T,columns:U,pageSize:z,page:M,rowsPerPageOptions:[5,10,25,50,100],checkboxSelection:!1,disableSelectionOnClick:!0,loading:P||x||I,onPageChange:function(e){L(e),R()},getRowId:function(e){var t;return null!==(t=e.__key__)&&void 0!==t?t:e.id},rowHeight:40,onPageSizeChange:F,componentsProps:{pagination:{labelDisplayedRows:function(e){var t=e.from,n=e.to;return"".concat(t,"-").concat(n," of many")},nextIconButtonProps:{disabled:!1}}},filterModel:{items:[]},onRowClick:function(e){u(!0),b(e.row)}})}),Object(v.jsx)(C.a,{anchor:"right",open:s&&null!==f,title:"View Entity",onClose:function(){u(!1),b(null)},sx:{"& .MuiDrawer-paper":{boxSizing:"border-box",width:300}},children:Object(v.jsxs)(d.a,{padding:"20px",children:[Object(v.jsx)(h.a,{variant:"h6",children:"View Entity"}),f&&Object.keys(f).sort().filter(H).map((function(e){return Object(v.jsxs)(d.a,{padding:"5px 0px",children:[Object(v.jsx)(h.a,{fontWeight:"bold",children:e}),Object(v.jsx)(d.a,{maxHeight:300,overflow:"auto",maxWidth:"100%",children:Object(v.jsx)(h.a,{children:G(f[e])})})]},e)}))]})})]})},q=function(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(r.useEffect)((function(){L.a.get("/server_config.json").then((function(e){M.defaults.baseURL="http://localhost:".concat(e.data.port),i(!1)})).catch((function(){throw i(!1),new Error("Unable to fetch server config.")}))}),[]),Object(v.jsx)(s.a,{children:Object(v.jsx)(y,{children:Object(v.jsx)(d.a,{height:"100%",width:"100%",display:"flex",flexDirection:"column",children:n?Object(v.jsx)(d.a,{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",children:Object(v.jsx)(b.a,{})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(d.a,{children:Object(v.jsx)(l.a,{position:"static",children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(f.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(v.jsx)(O.a,{})}),Object(v.jsx)(h.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Google Datastore Emulator UI"})]})})}),Object(v.jsx)(d.a,{flex:1,padding:"20px",children:Object(v.jsx)(u.c,{children:Object(v.jsx)(u.a,{path:"/",component:V})})})]})})})})};var X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,326)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};c.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(q,{})}),document.getElementById("root")),X()}},[[238,1,2]]]);