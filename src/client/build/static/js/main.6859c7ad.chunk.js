(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{303:function(e,t,n){},304:function(e,t,n){},355:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(78),o=n.n(c),l=(n(303),n(8)),u=n(473),s=n(242),d=n(158),j=n(35),b=(n(304),n(481)),p=n(482),O=n(3),f=n(225),h=n(113),v=n(42),g=n.n(v),x=n(486),m=n(25),y=n(467),w=n(227),k=Object(y.a)(a||(a=Object(m.a)(["\n  query GetKinds {\n    getKinds\n  }\n"])));var S,C=function(e){return Object(w.a)(k,e)},E=n(450),_=Object(y.a)(S||(S=Object(m.a)(["\n  query GetEntities($input: GetEntitiesInput!) {\n    getEntities(input: $input) {\n      entities {\n        entity\n        key\n        path\n      }\n      info {\n        moreResults\n        endCursor\n      }\n      typesMap\n      columns\n    }\n  }\n"])));var M,I=function(e){var t,n=Object(r.useState)(0),a=Object(l.a)(n,2),i=a[0],c=a[1],o=Object(r.useState)(15),u=Object(l.a)(o,2),s=u[0],d=u[1],j=Object(r.useState)(s),b=Object(l.a)(j,2),p=b[0],O=b[1];return{result:Object(E.a)(_,{variables:{input:Object(h.a)(Object(h.a)({},e),{},{page:i,pageSize:s,filters:null===(t=e.filters)||void 0===t?void 0:t.filter((function(e){return e.value}))})},onCompleted:function(e){var t=e.getEntities.info.moreResults;"MORE_RESULTS_AFTER_LIMIT"!==t&&"MORE_RESULTS_AFTER_CURSOR"!==t||O((i+2)*s)}}),changePage:c,page:i,setPageSize:d,pageSize:s,rowCount:p}},B=n(155),R=n(451),N=Object(y.a)(M||(M=Object(m.a)(["\n  mutation UpdateEntity($input: UpdateEntityInput!) {\n    updateEntity(input: $input) {\n        entity\n        key\n        path\n    }\n  }\n"])));var T=function(e){return Object(R.a)(N,e)},D=n(231),F=n(478),z=n(484);n(246);function P(e){return"object"===typeof e&&null!==e}var A=n(2);function U(e){return"__key__"!==e&&"__path"!==e}var L,q,W,G=function(e){var t=e.drawerOpen,n=e.entity,a=e.setDrawerOpen,r=e.setEntity;return Object(A.jsx)(F.a,{anchor:"right",open:t&&null!==n,title:"View Entity",onClose:function(){a(!1),r(null)},sx:{"& .MuiDrawer-paper":{boxSizing:"border-box",width:400}},children:Object(A.jsxs)(b.a,{padding:"20px",children:[Object(A.jsx)(z.a,{variant:"h6",children:"View Entity"}),n&&Object.keys(n).sort().filter(U).map((function(e){return Object(A.jsxs)(b.a,{padding:"5px 0px",children:[Object(A.jsx)(z.a,{fontWeight:"bold",children:e}),Object(A.jsx)(b.a,{maxHeight:300,overflow:"auto",maxWidth:"100%",children:P(n[e])?Object(A.jsx)(u.a,{language:"json",style:D.a,children:JSON.stringify(n[e],null,2)}):Object(A.jsx)(z.a,{children:n[e]})})]},e)}))]})})},K=n(466),$=n(491),J=n(475),H=n(476),V=function(e){var t=e.kind,n=e.kinds,a=e.setKind;return Object(A.jsxs)($.a,{children:[Object(A.jsx)(J.a,{id:"kinds-select-label",children:"Kinds"}),Object(A.jsx)(K.a,{autoWidth:!0,placeholder:"Kinds",value:t,onChange:function(e){return a(e.target.value)},label:"Kinds",labelId:"kinds-select-label",id:"kinds-select",size:"small",children:n.map((function(e){return Object(A.jsx)(H.a,{value:e,children:e},e)}))})]})},Y=n(21),Q=n(477),X=n(494);!function(e){e.Array="array",e.Boolean="boolean",e.Buffer="buffer",e.Date="date",e.Nullish="nullish",e.Number="number",e.Object="object",e.String="string",e.Undefined="undefined"}(L||(L={})),function(e){e.MoreResultsAfterCursor="MORE_RESULTS_AFTER_CURSOR",e.MoreResultsAfterLimit="MORE_RESULTS_AFTER_LIMIT",e.MoreResultsTypeUnspecified="MORE_RESULTS_TYPE_UNSPECIFIED",e.NotFinished="NOT_FINISHED",e.NoMoreResults="NO_MORE_RESULTS"}(q||(q={})),function(e){e.Equals="equals",e.GreaterThan="greater_than",e.GreaterThanOrEqual="greater_than_or_equal",e.HasAncestor="has_ancestor",e.LessThan="less_than",e.LessThanOrEqual="less_than_or_equal"}(W||(W={}));var Z,ee={string:"text",number:"number",date:"date",boolean:"checkbox"},te=[{label:"equals",value:"="},{label:"greater than",value:">"},{label:"greater than or equal to",value:">="},{label:"less than",value:"<"},{label:"less than or equal to",value:">="}],ne={marginRight:12},ae=function(e){var t,n,a=e.options,i=e.defaultValue,c=void 0===i?"":i,o=e.defaultOption,u=void 0===o?null:o,s=e.onChange,d=e.onRemove,j=e.typesMap,p=Object(r.useState)(u),f=Object(l.a)(p,2),h=f[0],v=f[1],g=Object(r.useState)(""),m=Object(l.a)(g,2),y=m[0],w=m[1],k=Object(r.useState)(c),S=Object(l.a)(k,2),C=S[0],E=S[1],_=null!==h?j[h]:"string",M=(t={},Object(O.a)(t,L.String,(function(e){return E(e)})),Object(O.a)(t,L.Number,(function(e){return E(Number(e))})),Object(O.a)(t,L.Boolean,(function(e){return E(Boolean(e))})),Object(O.a)(t,L.Array,(function(e){return E(e)})),Object(O.a)(t,L.Object,(function(e){return E(e)})),Object(O.a)(t,L.Undefined,(function(){return E(null)})),Object(O.a)(t,L.Nullish,(function(){return E(null)})),Object(O.a)(t,L.Date,(function(e){return E(e)})),Object(O.a)(t,L.Buffer,(function(e){return E(e)})),t);return Object(r.useEffect)((function(){s(h,y,C,_)}),[h,C,y]),Object(A.jsxs)(b.a,{display:"flex",children:[Object(A.jsx)(K.a,{value:h,onChange:function(e){v(e.target.value)},size:"small",style:ne,children:a.map((function(e){var t=e.label,n=e.value,a=e.type;return Object(A.jsx)(H.a,{value:n,"data-type":a,children:t},n)}))}),Object(A.jsx)(K.a,{value:y,onChange:function(e){return w(e.target.value)},size:"small",style:ne,children:te.map((function(e){var t=e.label,n=e.value;return Object(A.jsx)(H.a,{value:n,children:t},t)}))}),Object(A.jsx)(Q.a,{value:C,onChange:function(e){(M[_]||E)(e.target.value)},size:"small",style:ne,variant:"outlined",type:null!==(n=ee[_])&&void 0!==n?n:"text"}),Object(A.jsxs)(X.a,{children:[Object(A.jsx)(x.a,{variant:"outlined",onClick:function(){E("")},children:"Clear"}),Object(A.jsx)(x.a,{variant:"outlined",onClick:d,children:"Remove"})]})]})},re=(Z={},Object(O.a)(Z,L.Date,(function(e){return new Date(e)})),Object(O.a)(Z,L.Boolean,(function(e){return Boolean(e)})),Object(O.a)(Z,L.String,(function(e){return e})),Object(O.a)(Z,L.Number,(function(e){return e})),Object(O.a)(Z,L.Array,(function(e){return e})),Object(O.a)(Z,L.Object,(function(e){return e})),Object(O.a)(Z,L.Undefined,(function(){return null})),Object(O.a)(Z,L.Nullish,(function(){return null})),Object(O.a)(Z,L.Buffer,(function(e){return e})),Z),ie=function(e){var t=e.onApplyFilters,n=e.filterOptions,a=e.typesMap,i=Object(r.useState)([]),c=Object(l.a)(i,2),o=c[0],u=c[1];return 0===n.length?null:Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(b.a,{marginTop:"12px",children:o.map((function(e,t){return Object(A.jsx)(ae,{options:n,typesMap:a,onChange:function(e,n,a,r){u((function(i){var c=Object(Y.a)(i);return c.splice(t,1,{property:e,operator:n,value:a,type:r}),c}))},onRemove:function(){u((function(e){var n=Object(Y.a)(e);return n.splice(t,1),n}))},defaultOption:n[0].label},"filter-".concat(t))}))}),Object(A.jsxs)(X.a,{children:[Object(A.jsx)(x.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){u((function(e){return[].concat(Object(Y.a)(e),[{property:n[0].label,operator:"=",value:"",type:"string"}])}))},children:"Add Filter"}),Object(A.jsx)(x.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){t(o.map((function(e){var t=e.property,n=e.value,a=e.operator,r=e.type;return{property:t,value:(0,re[r])(n),operator:a}})))},children:"Apply Filters"}),Object(A.jsx)(x.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){t([]),u([])},children:"Reset Filters"})]})]})};var ce,oe,le,ue=function(){var e,t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(!1),o=Object(l.a)(c,2),u=o[0],s=o[1],d=Object(r.useState)(null),j=Object(l.a)(d,2),p=j[0],v=j[1],m=Object(r.useState)([]),y=Object(l.a)(m,2),w=y[0],k=y[1],S=Object(r.useState)(null),E=Object(l.a)(S,2),_=E[0],M=E[1],R=Object(r.useState)(null),N=Object(l.a)(R,2),D=N[0],F=N[1],z=C({onCompleted:function(e){a||i(e.getKinds[0])}}),P=z.data,U=z.loading,L=(P||{getKinds:[]}).getKinds,q=I({kind:a,filters:w,sortModel:_}),W=Object(l.a)(q.result,2),K=W[0],$=W[1],J=$.data,H=$.loading,Y=q.changePage,Q=q.page,X=q.pageSize,Z=q.setPageSize,ee=q.rowCount,te=T({onCompleted:function(){return K()}}),ne=Object(l.a)(te,1)[0],ae=(null!==J&&void 0!==J?J:{}).getEntities,re=Object(r.useMemo)((function(){return null!==ae&&void 0!==ae&&ae.entities?null===ae||void 0===ae?void 0:ae.entities.map((function(e){var t=e.entity,n=e.key,a=e.path;return Object(h.a)(Object(h.a)({id:n,key:n},t),{},{__path:a})})):[]}),[null===ae||void 0===ae?void 0:ae.entities]),ce=Object(r.useMemo)((function(){var e=((null===ae||void 0===ae?void 0:ae.columns)||[]).map((function(e){var t=null===ae||void 0===ae?void 0:ae.typesMap[e];return{field:e,headerName:e,flex:1,valueFormatter:function(e){return e.value instanceof Date?e.value.toLocaleString():void 0===e.value?"-":e.value},valueGetter:function(e){var t=e.row[e.field];return"date"===(null===ae||void 0===ae?void 0:ae.typesMap[e.field])?t?new Date(t):void 0:function(e){return null!==e&&void 0!==e&&!(!Array.isArray(e)&&"object"!==typeof e)}(t)?JSON.stringify(t):t},editable:!0,minWidth:200,type:"array"===t||"object"===t?"string":null===ae||void 0===ae?void 0:ae.typesMap[e]}}),[]);return[{field:"view",editable:!1,headerName:"",renderCell:function(e){return Object(A.jsx)(x.a,{onClick:function(){s(!0),v(e.row)},variant:"contained",size:"small",children:"View"})},width:100}].concat(e)}),[ae]),oe=Object(r.useMemo)((function(){return ae?ae.columns.map((function(e){return{label:e,value:e,type:ae.typesMap[e]}})):[]}),[ae]),le=Object(r.useCallback)(function(){var e=Object(f.a)(g.a.mark((function e(t){var n,a,r,i,c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=14;break}return n=t.value,a=t.field,r=null===ae||void 0===ae?void 0:ae.typesMap[a],i="array"===r||"object"===r,e.prev=4,c=Object(O.a)({},a,i?JSON.parse(n):(Date,n)),o=D.row.__path,e.next=9,ne({variables:{input:{path:o,updates:c}}});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),[D,null===ae||void 0===ae?void 0:ae.typesMap,ne]);return Object(r.useEffect)((function(){a&&K()}),[_,a]),Object(A.jsxs)(b.a,{children:[Object(A.jsx)(V,{kind:a,kinds:L,setKind:i}),Object(A.jsx)(ie,{onApplyFilters:k,filterOptions:oe,typesMap:null!==(e=null===ae||void 0===ae?void 0:ae.typesMap)&&void 0!==e?e:{}}),Object(A.jsx)(b.a,{height:600,width:"100%",marginTop:"20px",children:Object(A.jsx)(B.a,{pagination:!0,paginationMode:"server",sortingMode:"server",rows:re,rowCount:ee,columns:ce,pageSize:X,page:Q,editMode:"cell",onCellEditStart:function(e){F(e)},onCellEditCommit:le,rowsPerPageOptions:[5,10,15,25,50,100],checkboxSelection:!1,loading:H||U,onPageChange:function(e){Y(e),K()},getRowId:function(e){return e.id},disableSelectionOnClick:!0,rowHeight:40,onPageSizeChange:Z,componentsProps:{pagination:{labelDisplayedRows:function(e){var t=e.from,n=e.to;return"".concat(t,"-").concat(n," of many")},nextIconButtonProps:{disabled:!1}}},onSortModelChange:function(e){return M(e)}})}),Object(A.jsx)(G,{setDrawerOpen:s,setEntity:v,entity:p,drawerOpen:u})]})},se=n(235),de=n.n(se),je=n(257),be=n(468),pe=n(465),Oe=n(157),fe=Oe.a.main(ce||(ce=Object(m.a)(["\n    padding: 20px;\n    flex: 1;\n    ","\n"])),(function(e){var t=e.drawerOpen,n=e.drawerWidth;return"\n        margin-left: ".concat(t?"".concat(n,"px"):"0px",";\n    ")})),he=function(e){var t=e.drawerOpen,n=e.drawerWidth,a=e.children;return Object(A.jsx)(fe,{drawerOpen:t,drawerWidth:n,children:a})},ve=n(487),ge=n(488),xe=n(489),me=n(238),ye=n.n(me),we=Object(Oe.a)(ve.a)(oe||(oe=Object(m.a)(["\n  ","\n"])),(function(e){var t=e.drawerOpen,n=e.drawerWidth;return"\n        ".concat(t?"\n                width: calc(100% - ".concat(n,"px);\n                margin-left: ").concat(n,"px;\n            "):"","\n    ")})),ke=function(e){var t=e.drawerOpen,n=e.drawerWidth,a=e.onIconClick;return Object(A.jsx)(we,{position:"static",drawerOpen:t,drawerWidth:n,children:Object(A.jsxs)(ge.a,{children:[Object(A.jsx)(xe.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:a,children:Object(A.jsx)(ye.a,{})}),Object(A.jsx)(z.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Google Datastore Emulator UI"})]})})},Se=n(485),Ce=n(471),Ee=n(462),_e=n(463),Me=n(240),Ie=n.n(Me),Be=n(239),Re=[{text:"Entities",Icon:n.n(Be).a,link:"/"},{text:"Backups",Icon:Ie.a,link:"backups"}],Ne=function(e){var t=e.drawerOpen,n=e.drawerWidth;return Object(A.jsx)(F.a,{sx:{width:n,flexShrink:0,"& .MuiDrawer-paper":{width:n,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:t,children:Object(A.jsx)(Se.a,{children:Re.map((function(e,t){var n=e.text,a=e.Icon,r=e.link;return Object(A.jsxs)(Ce.a,{button:!0,component:d.b,to:r,children:[Object(A.jsx)(Ee.a,{children:Object(A.jsx)(a,{})}),Object(A.jsx)(_e.a,{primary:n})]},n)}))})})},Te=n(103),De=n(464),Fe=n(370),ze=Object(y.a)(le||(le=Object(m.a)(["\n  query GetBackups {\n    getBackups {\n        id\n        name\n        date\n        exists\n        path\n    }\n  }\n"])));var Pe,Ae=function(e){return Object(w.a)(ze,e)},Ue=Object(y.a)(Pe||(Pe=Object(m.a)(["\n  mutation ImportBackup($name: String!) {\n    importBackup(name: $name)\n  }\n"])));var Le,qe=function(e){return Object(R.a)(Ue,e)},We=Object(y.a)(Le||(Le=Object(m.a)(["\n  mutation DownloadBackup($name: String!) {\n    downloadBackup(name: $name)\n  }\n"])));var Ge,Ke=function(e){return Object(R.a)(We,e)},$e=Object(y.a)(Ge||(Ge=Object(m.a)(["\n  mutation StartBackup {\n    startBackup\n  }\n"])));var Je,He=function(e){return Object(R.a)($e,e)},Ve=Object(y.a)(Je||(Je=Object(m.a)(["\n  query GetProjectId {\n    getProjectId\n  }\n"])));var Ye=function(){return Object(w.a)(Ve)},Qe=function(){var e,t=Ae(),n=t.data,a=t.loading,i=t.error,c=t.refetch,o=Ye().data,u=qe(),s=Object(l.a)(u,2),d=s[0],j=s[1].loading,p=Ke(),O=Object(l.a)(p,2),f=O[0],h=O[1].loading,v=He(),g=Object(l.a)(v,2),x=g[0],m=g[1].loading,y=Object(r.useState)(null),w=Object(l.a)(y,2),k=w[0],S=w[1],C=Object(r.useState)(null),E=Object(l.a)(C,2),_=E[0],M=E[1],I=function(e,t){var n=e.importBackup,a=e.importingBackup,r=e.currentlyImportingBackup,i=t.downloadBackup,c=t.downloadingBackup,o=t.currentlyDownloadingBackup;return[{field:"name",headerName:"Name",flex:1},{field:"date",headerName:"Created At",flex:1,type:"date",valueFormatter:function(e){return"string"===typeof e.value?new Date(e.value).toLocaleString():"-"}},{field:"download",headerName:"Download",flex:1,renderCell:function(e){var t=c&&e.row.name===o;return Object(A.jsx)(Te.a,{disabled:e.row.exists||c,variant:"contained",onClick:function(){return i(e.row.name)},children:t?"Downloading":"Download"})},sortable:!1,editable:!1},{field:"import",headerName:"Import",flex:1,renderCell:function(e){var t=a&&e.row.name===r;return Object(A.jsx)(Te.a,{disabled:!e.row.exists||a,variant:"contained",onClick:function(){return n(e.row.name)},startIcon:t?Object(A.jsx)(Fe.a,{size:12}):null,children:t?"Importing":"Import"})},sortable:!1,editable:!1}]}({importBackup:function(e){S(e),d({variables:{name:e}}).then((function(){S(null)})).catch((function(){S(null)}))},importingBackup:j,currentlyImportingBackup:k},{downloadBackup:function(e){M(e),f({variables:{name:e}}).then((function(){M(null),c()})).catch((function(){M(null)}))},downloadingBackup:h,currentlyDownloadingBackup:_});return Object(A.jsxs)(b.a,{width:"100%",height:"100%",children:[o&&Object(A.jsx)(Te.a,{startIcon:m?Object(A.jsx)(Fe.a,{size:12}):null,variant:"contained",onClick:function(){x().then((function(){c()}))},disabled:m,children:m?"Creating Backup of ".concat(o.getProjectId):"Create Backup of ".concat(o.getProjectId)}),Object(A.jsx)(b.a,{height:600,width:"100%",marginTop:"20px",children:Object(A.jsx)(B.a,{columns:I,rows:null!==(e=null===n||void 0===n?void 0:n.getBackups)&&void 0!==e?e:[],loading:a,paginationMode:"client",pagination:!0,pageSize:10,sortModel:[{field:"date",sort:"desc"}],disableSelectionOnClick:!0,components:{NoRowsOverlay:function(){var e;return Object(A.jsx)(De.a,{height:"100%",alignItems:"center",justifyContent:"center",children:null!==(e=null===i||void 0===i?void 0:i.message)&&void 0!==e?e:"No rows backups found."})},NoResultsOverlay:function(){var e;return Object(A.jsx)(De.a,{height:"100%",alignItems:"center",justifyContent:"center",children:null!==(e=null===i||void 0===i?void 0:i.message)&&void 0!==e?e:"No rows backups found."})}}})})]})};u.a.registerLanguage("json",s.a);var Xe=function(){var e=Object(r.useState)(void 0),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!1),c=Object(l.a)(i,2),o=c[0],u=c[1];return Object(r.useEffect)((function(){de.a.get("/server_config.json").then((function(e){a(new je.a({uri:"http://localhost:".concat(e.data.port,"/graphql"),cache:new be.a}))})).catch((function(){throw new Error("Unable to fetch server config.")}))}),[]),Object(A.jsx)(d.a,{children:Object(A.jsx)(b.a,{height:"100%",width:"100%",display:"flex",flexDirection:"column",children:void 0===n?Object(A.jsx)(b.a,{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",children:Object(A.jsx)(p.a,{})}):Object(A.jsxs)(pe.a,{client:n,children:[Object(A.jsx)(ke,{drawerOpen:o,drawerWidth:240,onIconClick:function(){u(!o)}}),Object(A.jsx)(Ne,{drawerOpen:o,drawerWidth:240}),Object(A.jsx)(he,{drawerOpen:o,drawerWidth:240,children:Object(A.jsxs)(j.c,{children:[Object(A.jsx)(j.a,{path:"/",exact:!0,component:ue}),Object(A.jsx)(j.a,{path:"/backups",exact:!0,component:Qe})]})})]})})})},Ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,498)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};o.a.render(Object(A.jsx)(i.a.StrictMode,{children:Object(A.jsx)(Xe,{})}),document.getElementById("root")),Ze()}},[[355,1,2]]]);