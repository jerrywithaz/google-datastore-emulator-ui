(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{277:function(e,t,n){},278:function(e,t,n){},340:function(e,t,n){"use strict";n.r(t);var i,a=n(0),r=n.n(a),c=n(77),o=n.n(c),l=(n(277),n(7)),s=n(459),u=n(222),d=n(224),j=n(35),b=(n(278),n(471)),p=n(468),f=n(472),O=n(469),v=n(473),h=n(470),g=n(226),x=n.n(g),y=n(3),m=n(112),w=n(476),C=n(32),S=n(453),k=n(213),E=Object(S.a)(i||(i=Object(C.a)(["\n  query GetKinds {\n    getKinds\n  }\n"])));var M,_=function(e){return Object(k.a)(E,e)},R=n(437),z=Object(S.a)(M||(M=Object(C.a)(["\n  query GetEntities($input: GetEntitiesInput!) {\n    getEntities(input: $input) {\n      entities {\n        entity\n        id\n      }\n      info {\n        moreResults\n        endCursor\n      }\n      typesMap\n      columns\n    }\n  }\n"])));var F=function(e){var t,n=Object(a.useState)(0),i=Object(l.a)(n,2),r=i[0],c=i[1],o=Object(a.useState)(15),s=Object(l.a)(o,2),u=s[0],d=s[1],j=Object(a.useState)(u),b=Object(l.a)(j,2),p=b[0],f=b[1];return{result:Object(R.a)(z,{variables:{input:Object(m.a)(Object(m.a)({},e),{},{page:r,pageSize:u,filters:null===(t=e.filters)||void 0===t?void 0:t.filter((function(e){return e.value}))})},onCompleted:function(e){var t=e.getEntities.info.moreResults;"MORE_RESULTS_AFTER_LIMIT"!==t&&"MORE_RESULTS_AFTER_CURSOR"!==t||f((r+2)*u)}}),changePage:c,page:r,setPageSize:d,pageSize:u,rowCount:p}},I=n(21);var T,P=function(e){var t=new Map;e.forEach((function(e){Object.keys(e).forEach((function(n){if("__typename"!==n&&!t.has(n)){var i=function(e){return Array.isArray(e)||"object"===typeof e?"string":typeof e}(e[n]);t.set(n,{key:n,type:i})}}))}));var n=Object(I.a)(t.values());n.sort();var i=n.findIndex((function(e){return"id"===e.key.toLowerCase()}));i>-1?(n.splice(i,1),n.unshift({key:"id",type:"string "})):n.unshift({key:"id",type:"string "});var a=n.findIndex((function(e){return"__key__"===e.key.toLowerCase()}));return a>-1&&n.splice(a,1),n},A=n(219),D=n(438),K=Object(S.a)(T||(T=Object(C.a)(["\n  mutation UpdateEntity($input: UpdateEntityInput!) {\n    updateEntity(input: $input) {\n        entity\n        id\n    }\n  }\n"])));var L=function(e){return Object(D.a)(K,e)},U=n(218),q=n(464);n(229);function G(e){return"object"===typeof e&&null!==e}var J=n(2);function N(e){return"__key__"!==e}var V=function(e){var t=e.drawerOpen,n=e.entity,i=e.setDrawerOpen,a=e.setEntity;return Object(J.jsx)(q.a,{anchor:"right",open:t&&null!==n,title:"View Entity",onClose:function(){i(!1),a(null)},sx:{"& .MuiDrawer-paper":{boxSizing:"border-box",width:400}},children:Object(J.jsxs)(p.a,{padding:"20px",children:[Object(J.jsx)(O.a,{variant:"h6",children:"View Entity"}),n&&Object.keys(n).sort().filter(N).map((function(e){return Object(J.jsxs)(p.a,{padding:"5px 0px",children:[Object(J.jsx)(O.a,{fontWeight:"bold",children:e}),Object(J.jsx)(p.a,{maxHeight:300,overflow:"auto",maxWidth:"100%",children:G(n[e])?Object(J.jsx)(s.a,{language:"json",style:U.a,children:JSON.stringify(n[e],null,2)}):Object(J.jsx)(O.a,{children:n[e]})})]},e)}))]})})},W=n(452),$=n(461),B=n(462),H=n(457),Q=function(e){var t=e.kind,n=e.kinds,i=e.setKind;return Object(J.jsxs)($.a,{children:[Object(J.jsx)(B.a,{id:"kinds-select-label",children:"Kinds"}),Object(J.jsx)(W.a,{autoWidth:!0,placeholder:"Kinds",value:t,onChange:function(e){return i(e.target.value)},label:"Kinds",labelId:"kinds-select-label",id:"kinds-select",size:"small",children:n.map((function(e){return Object(J.jsx)(H.a,{value:e,children:e},e)}))})]})},X=n(463),Y=n(477),Z=[{label:"equals",value:"="},{label:"greater than",value:">"},{label:"greater than or equal to",value:">="},{label:"less than",value:"<"},{label:"less than or equal to",value:"<"}],ee={marginRight:12},te=function(e){var t=e.options,n=e.defaultValue,i=void 0===n?"":n,r=e.defaultOption,c=void 0===r?null:r,o=e.onChange,s=e.onRemove,u=Object(a.useState)(c),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(a.useState)("="),O=Object(l.a)(f,2),v=O[0],h=O[1],g=Object(a.useState)(i),x=Object(l.a)(g,2),y=x[0],m=x[1];return Object(a.useEffect)((function(){o(j,v,y)}),[j,y,v]),Object(J.jsxs)(p.a,{display:"flex",children:[Object(J.jsx)(W.a,{value:j,onChange:function(e){return b(e.target.value)},size:"small",style:ee,children:t.map((function(e){var t=e.label,n=e.value;return Object(J.jsx)(H.a,{value:n,children:t},n)}))}),Object(J.jsx)(W.a,{value:v,onChange:function(e){return h(e.target.value)},size:"small",style:ee,children:Z.map((function(e){var t=e.label,n=e.value;return Object(J.jsx)(H.a,{value:n,children:t},n)}))}),Object(J.jsx)(X.a,{value:y,onChange:function(e){return m(e.target.value)},size:"small",style:ee,variant:"outlined"}),Object(J.jsxs)(Y.a,{children:[Object(J.jsx)(w.a,{variant:"outlined",onClick:function(){m("")},children:"Clear"}),Object(J.jsx)(w.a,{variant:"outlined",onClick:s,children:"Remove"})]})]})},ne=function(e){var t=e.onApplyFilters,n=e.filterOptions,i=e.setFilters,a=e.filters;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(p.a,{marginTop:"12px",children:a.map((function(e,t){return Object(J.jsx)(te,{options:n,onChange:function(e,n,a){i((function(i){var r=Object(I.a)(i);return r.splice(t,1,{property:e,operator:n,value:a}),r}))},onRemove:function(){i((function(e){var n=Object(I.a)(e);return n.splice(t,1),n}))},defaultOption:n[0].label},t)}))}),Object(J.jsxs)(Y.a,{children:[Object(J.jsx)(w.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){i((function(e){return[].concat(Object(I.a)(e),[{property:n[0].label,operator:"=",value:""}])}))},children:"Add Filter"}),Object(J.jsx)(w.a,{color:"primary",variant:"contained",style:{marginTop:12},onClick:function(){t()},children:"Apply Filters"})]})]})};var ie=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(!1),c=Object(l.a)(r,2),o=c[0],s=c[1],u=Object(a.useState)(null),d=Object(l.a)(u,2),j=d[0],b=d[1],f=Object(a.useState)([]),O=Object(l.a)(f,2),v=O[0],h=O[1],g=Object(a.useState)(null),x=Object(l.a)(g,2),C=x[0],S=x[1],k=_({onCompleted:function(e){n||i(e.getKinds[0])}}),E=k.data,M=k.loading,R=(E||{getKinds:[]}).getKinds,z=F({kind:n,filters:v,sortModel:C}),I=Object(l.a)(z.result,2),T=I[0],D=I[1],K=D.data,U=D.loading,q=z.changePage,G=z.page,N=z.pageSize,W=z.setPageSize,$=z.rowCount,B=L({onCompleted:function(){return T()}}),H=Object(l.a)(B,1)[0],X=(null!==K&&void 0!==K?K:{}).getEntities,Y=Object(a.useMemo)((function(){return(null===X||void 0===X?void 0:X.entities)?null===X||void 0===X?void 0:X.entities.map((function(e){var t=e.entity,n=e.id;return Object(m.a)(Object(m.a)({},t),{},{id:n})})):[]}),[null===X||void 0===X?void 0:X.entities]),Z=Object(a.useMemo)((function(){return P(Y)}),[Y]),ee=Object(a.useMemo)((function(){var e=((null===X||void 0===X?void 0:X.columns)||[]).map((function(e){var t=null===X||void 0===X?void 0:X.typesMap[e];return{field:e,headerName:e,flex:1,valueFormatter:function(e){return e.value instanceof Date?e.value.getTime():void 0===e.value?"-":e.value},valueGetter:function(e){var t=e.row[e.field];return"date"===(null===X||void 0===X?void 0:X.typesMap[e.field])?t?new Date(t):void 0:function(e){return null!==e&&void 0!==e&&!(!Array.isArray(e)&&"object"!==typeof e)}(t)?JSON.stringify(t):t},editable:!0,minWidth:200,type:"array"===t||"object"===t?"string":null===X||void 0===X?void 0:X.typesMap[e]}}),[]);return[{field:"view",editable:!1,headerName:"",renderCell:function(e){return Object(J.jsx)(w.a,{onClick:function(){s(!0),b(e.row)},variant:"contained",size:"small",children:"View"})},width:100}].concat(e)}),[null===X||void 0===X?void 0:X.columns,null===X||void 0===X?void 0:X.typesMap]),te=Object(a.useMemo)((function(){return Z.map((function(e){var t=e.key;return{label:t,value:t}}))}),[Z]);return Object(a.useEffect)((function(){n&&T()}),[C,n]),Object(J.jsxs)(p.a,{children:[Object(J.jsx)(Q,{kind:n,kinds:R,setKind:i}),Object(J.jsx)(ne,{onApplyFilters:T,filterOptions:te,setFilters:h,filters:v}),Object(J.jsx)(p.a,{height:600,width:"100%",marginTop:"20px",children:Object(J.jsx)(A.a,{pagination:!0,paginationMode:"server",sortingMode:"server",rows:Y,rowCount:$,columns:ee,pageSize:N,page:G,editMode:"cell",onCellEditCommit:function(e,t,i){var a=e.field,r=e.id,c=e.value,o=null===X||void 0===X?void 0:X.typesMap[a],l="array"===o||"object"===o;H({variables:{input:{path:[n,"".concat(r)],updates:Object(y.a)({},a,l?JSON.parse(c):c instanceof Date?c.getTime():c)}}})},rowsPerPageOptions:[5,10,25,50,100],checkboxSelection:!1,loading:U||M,onPageChange:function(e){q(e),T()},getRowId:function(e){var t;return null!==(t=e.__key__)&&void 0!==t?t:e.id},disableSelectionOnClick:!0,rowHeight:40,onPageSizeChange:W,componentsProps:{pagination:{labelDisplayedRows:function(e){var t=e.from,n=e.to;return"".concat(t,"-").concat(n," of many")},nextIconButtonProps:{disabled:!1}}},onSortModelChange:function(e){return S(e)}})}),Object(J.jsx)(V,{setDrawerOpen:s,setEntity:b,entity:j,drawerOpen:o})]})},ae=n(221),re=n.n(ae),ce=n(239),oe=n(454),le=n(451);s.a.registerLanguage("json",u.a);var se=function(){var e=Object(a.useState)(void 0),t=Object(l.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){re.a.get("/server_config.json").then((function(e){i(new ce.a({uri:"http://localhost:".concat(e.data.port,"/graphql"),cache:new oe.a}))})).catch((function(){throw new Error("Unable to fetch server config.")}))}),[]),Object(J.jsx)(d.a,{children:Object(J.jsx)(p.a,{height:"100%",width:"100%",display:"flex",flexDirection:"column",children:void 0===n?Object(J.jsx)(p.a,{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",children:Object(J.jsx)(h.a,{})}):Object(J.jsxs)(le.a,{client:n,children:[Object(J.jsx)(p.a,{children:Object(J.jsx)(b.a,{position:"static",children:Object(J.jsxs)(f.a,{children:[Object(J.jsx)(v.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(J.jsx)(x.a,{})}),Object(J.jsx)(O.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Google Datastore Emulator UI"})]})})}),Object(J.jsx)(p.a,{flex:1,padding:"20px",children:Object(J.jsx)(j.c,{children:Object(J.jsx)(j.a,{path:"/",component:ie})})})]})})})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,482)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))};o.a.render(Object(J.jsx)(r.a.StrictMode,{children:Object(J.jsx)(se,{})}),document.getElementById("root")),ue()}},[[340,1,2]]]);